"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[590],{4840:function(e,t,a){a.r(t),a.d(t,{Providers:function(){return l},useSupabase:function(){return c}});var s=a(7437),r=a(2265),n=a(3082);let i=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[a]=(0,r.useState)(()=>(0,n.createClientComponentClient)());return(0,s.jsx)(i.Provider,{value:{supabase:a},children:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:t})})}let c=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}},1666:function(e,t,a){a.r(t),a.d(t,{Header:function(){return es}});var s=a(7437),r=a(2265),n=a(1396),i=a.n(n),l=a(4033),c=a(7480),o=a(2176),d=a(9865),m=a(5750),u=a(1827),x=a(7972),f=a(9409),h=a(5883),p=a(8004),g=a(4840),y=a(575),v=a(5808),j=a(1655),N=a(7158),b=a(2442),w=a(6369),k=a(2169);let C=j.fC,S=j.xz,z=j.ZA,Z=j.Uv,_=j.Tr,I=j.Ee,F=r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...i}=e;return(0,s.jsxs)(j.fF,{ref:t,className:(0,k.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...i,children:[n,(0,s.jsx)(N.Z,{className:"ml-auto h-4 w-4"})]})});F.displayName=j.fF.displayName;let R=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(j.tu,{ref:t,className:(0,k.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})});R.displayName=j.tu.displayName;let T=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(j.Uv,{children:(0,s.jsx)(j.VY,{ref:t,sideOffset:r,className:(0,k.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});T.displayName=j.VY.displayName;let O=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(j.ck,{ref:t,className:(0,k.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...n})});O.displayName=j.ck.displayName;let E=r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...i}=e;return(0,s.jsxs)(j.oC,{ref:t,className:(0,k.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(j.wU,{children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})})}),r]})});E.displayName=j.oC.displayName;let D=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(j.Rk,{ref:t,className:(0,k.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(j.wU,{children:(0,s.jsx)(w.Z,{className:"h-2 w-2 fill-current"})})}),r]})});D.displayName=j.Rk.displayName;let M=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(j.__,{ref:t,className:(0,k.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});M.displayName=j.__.displayName;let Y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(j.Z0,{ref:t,className:(0,k.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});Y.displayName=j.Z0.displayName;let A=e=>{let{className:t,...a}=e;return(0,s.jsx)("span",{className:(0,k.cn)("ml-auto text-xs tracking-widest opacity-60",t),...a})};A.displayName="DropdownMenuShortcut";let V=Object.assign(C,{Trigger:S,Content:T,Item:O,CheckboxItem:E,RadioItem:D,Label:M,Separator:Y,Shortcut:A,Group:z,Portal:Z,Sub:_,SubContent:R,SubTrigger:F,RadioGroup:I});var q=a(9805),G=a(3097),Q=a(2549);function U(e){var t,a;let{isOpen:n,onClose:l,navigation:c,user:o,profile:d,onSignOut:m}=e;return(0,s.jsx)(q.u.Root,{show:n,as:r.Fragment,children:(0,s.jsxs)(G.V,{as:"div",className:"relative z-50 lg:hidden",onClose:l,children:[(0,s.jsx)(q.u.Child,{as:r.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-900/80"})}),(0,s.jsx)("div",{className:"fixed inset-0 flex",children:(0,s.jsx)(q.u.Child,{as:r.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,s.jsxs)(G.V.Panel,{className:"relative mr-16 flex w-full max-w-xs flex-1",children:[(0,s.jsx)(q.u.Child,{as:r.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"absolute left-full top-0 flex w-16 justify-center pt-5",children:(0,s.jsxs)("button",{type:"button",className:"-m-2.5 p-2.5",onClick:l,children:[(0,s.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,s.jsx)(Q.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),(0,s.jsxs)("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4",children:[(0,s.jsx)("div",{className:"flex h-16 shrink-0 items-center",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-primary",children:(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:"LF"})}),(0,s.jsx)("span",{className:"font-bold text-gray-900",children:"Lise Forumu"})]})}),o&&d&&(0,s.jsxs)("div",{className:"flex items-center space-x-3 rounded-lg bg-gray-50 p-3",children:[(0,s.jsx)(v.q,{src:d.avatar_url,alt:d.display_name||d.username,fallback:(null===(a=d.username)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.toUpperCase())||"U",size:"lg"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.display_name||d.username}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:o.email}),d.level&&(0,s.jsx)("div",{className:"flex items-center mt-1",children:(0,s.jsxs)("span",{className:"text-xs bg-primary-100 text-primary-800 px-2 py-0.5 rounded-full",children:["Seviye ",d.level]})})]})]}),(0,s.jsx)("nav",{className:"flex flex-1 flex-col",children:(0,s.jsxs)("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:[(0,s.jsx)("li",{children:(0,s.jsx)("ul",{role:"list",className:"-mx-2 space-y-1",children:c.map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)(i(),{href:e.href,onClick:l,className:"group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold text-gray-700 hover:text-primary-600 hover:bg-gray-50",children:[(0,s.jsx)(e.icon,{className:"h-6 w-6 shrink-0","aria-hidden":"true"}),e.name]})},e.name))})}),o&&(0,s.jsx)("li",{className:"mt-auto",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)(i(),{href:"/profile",onClick:l,className:"group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold text-gray-700 hover:text-primary-600 hover:bg-gray-50",children:[(0,s.jsx)(x.Z,{className:"h-6 w-6 shrink-0"}),"Profil"]}),(0,s.jsxs)(i(),{href:"/settings",onClick:l,className:"group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold text-gray-700 hover:text-primary-600 hover:bg-gray-50",children:[(0,s.jsx)(f.Z,{className:"h-6 w-6 shrink-0"}),"Ayarlar"]}),(0,s.jsxs)("button",{onClick:()=>{m(),l()},className:"group flex w-full gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,s.jsx)(h.Z,{className:"h-6 w-6 shrink-0"}),"\xc7ıkış Yap"]})]})}),!o&&(0,s.jsxs)("li",{className:"mt-auto space-y-2",children:[(0,s.jsx)(y.z,{asChild:!0,className:"w-full",children:(0,s.jsx)(i(),{href:"/auth/login",onClick:l,children:"Giriş Yap"})}),(0,s.jsx)(y.z,{variant:"outline",asChild:!0,className:"w-full",children:(0,s.jsx)(i(),{href:"/auth/register",onClick:l,children:"Kayıt Ol"})})]})]})})]})]})})})]})})}var J=a(7562),K=a(6141),P=a(5790),L=a(1097);function B(e){let{size:t="md",className:a}=e;return(0,s.jsx)("div",{className:(0,k.cn)("flex items-center justify-center p-4",a),children:(0,s.jsx)("div",{className:(0,k.cn)("animate-spin rounded-full border-2 border-gray-300 border-t-primary-500",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])})})}function H(e){let{isOpen:t,onClose:a}=e,[n,i]=(0,r.useState)(""),[l,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(!1),[f,h]=(0,r.useState)([]),[p,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{t&&(y(),v())},[t]);let y=()=>{let e=localStorage.getItem("recentSearches");e&&h(JSON.parse(e))},v=async()=>{try{let{data:e}=await L.OQ.from("forum_topics").select("\n          id,\n          title,\n          view_count,\n          forum_categories(name)\n        ").order("view_count",{ascending:!1}).limit(5);if(e){let t=e.map(e=>({id:e.id,type:"topic",title:e.title,subtitle:e.forum_categories&&"name"in e.forum_categories?String(e.forum_categories.name):"Genel",url:"/forum/topic/".concat(e.id)}));g(t)}}catch(e){console.error("Error loading trending topics:",e)}},j=(0,r.useCallback)((0,k.Ds)(async e=>{if(!e.trim()){c([]),m(!1);return}m(!0);try{let{data:t}=await L.OQ.from("forum_topics").select("\n            id,\n            title,\n            content,\n            forum_categories(name)\n          ").or("title.ilike.%".concat(e,"%,content.ilike.%").concat(e,"%")).limit(5),{data:a}=await L.OQ.from("profiles").select("id, username, display_name, avatar_url").or("username.ilike.%".concat(e,"%,display_name.ilike.%").concat(e,"%")).limit(3),{data:s}=await L.OQ.from("forum_categories").select("id, name, description").or("name.ilike.%".concat(e,"%,description.ilike.%").concat(e,"%")).limit(3),r=[];t&&t.forEach(e=>{r.push({id:e.id,type:"topic",title:e.title,subtitle:e.forum_categories&&Array.isArray(e.forum_categories)&&e.forum_categories[0]?e.forum_categories[0].name:"Genel",url:"/forum/topic/".concat(e.id)})}),a&&a.forEach(e=>{r.push({id:e.id,type:"user",title:e.display_name||e.username,subtitle:"@".concat(e.username),avatar:e.avatar_url,url:"/profile/".concat(e.username)})}),s&&s.forEach(e=>{r.push({id:e.id,type:"category",title:e.name,subtitle:e.description,url:"/forum/category/".concat(e.id)})}),c(r)}catch(e){console.error("Search error:",e),c([])}finally{m(!1)}},300),[]);(0,r.useEffect)(()=>{n?(m(!0),j(n)):(c([]),m(!1))},[n,j]);let N=e=>{let t=[e.title,...f.filter(t=>t!==e.title)].slice(0,5);h(t),localStorage.setItem("recentSearches",JSON.stringify(t)),a()},b=e=>{switch(e){case"topic":return o.Z;case"user":return x.Z;case"category":return J.Z;default:return u.Z}};return(0,s.jsxs)(G.V,{open:t,onClose:a,className:"relative z-50",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-900/50","aria-hidden":"true"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-start justify-center p-4 pt-[10vh]",children:(0,s.jsxs)(G.V.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-xl bg-white shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center border-b border-gray-200 px-4",children:[(0,s.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Konu, kullanıcı veya kategori ara...",value:n,onChange:e=>i(e.target.value),className:"flex-1 border-0 bg-transparent py-4 pl-3 pr-4 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0",autoFocus:!0}),d&&(0,s.jsx)(B,{size:"sm"})]}),(0,s.jsxs)("div",{className:"max-h-96 overflow-y-auto",children:[n&&l.length>0&&(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{className:"mb-2 px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Arama Sonu\xe7ları"}),l.map(e=>{let t=b(e.type);return(0,s.jsxs)("button",{onClick:()=>N(e),className:"flex w-full items-center rounded-lg px-3 py-2 text-left hover:bg-gray-100",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gray-100",children:(0,s.jsx)(t,{className:"h-4 w-4 text-gray-600"})}),(0,s.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),e.subtitle&&(0,s.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.subtitle})]})]},"".concat(e.type,"-").concat(e.id))})]}),n&&!d&&0===l.length&&(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"Sonu\xe7 bulunamadı"}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:['"',n,'" i\xe7in herhangi bir sonu\xe7 bulunamadı.']})]}),!n&&(0,s.jsxs)("div",{className:"p-2",children:[f.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"mb-2 px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Son Aramalar"}),f.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>i(e),className:"flex w-full items-center rounded-lg px-3 py-2 text-left hover:bg-gray-100",children:[(0,s.jsx)(K.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"ml-3 text-sm text-gray-900",children:e})]},t))]}),p.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-2 px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Trend Konular"}),p.map(e=>(0,s.jsxs)("button",{onClick:()=>N(e),className:"flex w-full items-center rounded-lg px-3 py-2 text-left hover:bg-gray-100",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4 text-primary-500"}),(0,s.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),e.subtitle&&(0,s.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.subtitle})]})]},e.id))]})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 px-4 py-3",children:(0,s.jsx)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{children:"↵ Se\xe7"}),(0,s.jsx)("span",{children:"↑↓ Gezin"}),(0,s.jsx)("span",{children:"ESC Kapat"})]})})})]})})]})}var X=a(7810),W=a(4527),$=a(6781),ee=a(3021),et=a(3277);function ea(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(0),[i,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c();let e=L.OQ.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},e=>{let a=e.new;t(e=>[a,...e]),n(e=>e+1)}).subscribe();return()=>{L.OQ.removeChannel(e)}},[]);let c=async()=>{l(!0);try{let e=[{id:"1",type:"like",title:"Beğeni aldın!",message:"Ali Veli konunu beğendi",avatar:"/avatars/ali.jpg",url:"/forum/topic/123",read:!1,created_at:new Date(Date.now()-3e5).toISOString()},{id:"2",type:"reply",title:"Yeni cevap",message:"Ayşe Yılmaz konuna cevap verdi",avatar:"/avatars/ayse.jpg",url:"/forum/topic/124",read:!1,created_at:new Date(Date.now()-9e5).toISOString()},{id:"3",type:"friend_request",title:"Arkadaşlık isteği",message:"Mehmet Kaya sana arkadaşlık isteği g\xf6nderdi",avatar:"/avatars/mehmet.jpg",url:"/friends/requests",read:!0,created_at:new Date(Date.now()-72e5).toISOString()},{id:"4",type:"badge_earned",title:"Yeni rozet kazandın!",message:'"İlk Konu" rozetini kazandın',url:"/profile/badges",read:!0,created_at:new Date(Date.now()-864e5).toISOString()}];t(e),n(e.filter(e=>!e.read).length)}catch(e){console.error("Error loading notifications:",e)}finally{l(!1)}},d=async e=>{try{t(t=>t.map(t=>t.id===e?{...t,read:!0}:t)),n(e=>Math.max(0,e-1))}catch(e){console.error("Error marking notification as read:",e)}},m=async()=>{try{t(e=>e.map(e=>({...e,read:!0}))),n(0)}catch(e){console.error("Error marking all notifications as read:",e)}},u=e=>{switch(e){case"like":return X.Z;case"reply":return o.Z;case"friend_request":return W.Z;case"badge_earned":return $.Z;default:return ee.Z}};return(0,s.jsxs)(V,{children:[(0,s.jsx)(V.Trigger,{asChild:!0,children:(0,s.jsxs)(y.z,{variant:"ghost",size:"sm",className:"relative",children:[(0,s.jsx)(ee.Z,{className:"h-4 w-4"}),a>0&&(0,s.jsx)(et.C,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs flex items-center justify-center",children:a>9?"9+":a})]})}),(0,s.jsxs)(V.Content,{align:"end",className:"w-80",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border-b",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm",children:"Bildirimler"}),a>0&&(0,s.jsx)(y.z,{variant:"ghost",size:"sm",onClick:m,className:"text-xs",children:"T\xfcm\xfcn\xfc okundu işaretle"})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===e.length?(0,s.jsxs)("div",{className:"p-6 text-center",children:[(0,s.jsx)(ee.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Bildirim yok"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Yeni bildirimler burada g\xf6r\xfcnecek"})]}):e.map(e=>{let t=u(e.type);return(0,s.jsxs)("div",{className:"flex items-start space-x-3 p-3 hover:bg-gray-50 ".concat(e.read?"":"bg-blue-50"),children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:e.avatar?(0,s.jsx)(v.q,{src:e.avatar,alt:"",size:"sm"}):(0,s.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary-100",children:(0,s.jsx)(t,{className:"h-4 w-4 text-primary-600"})})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.message}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,k.SY)(e.created_at)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[!e.read&&(0,s.jsx)("button",{onClick:()=>d(e.id),className:"p-1 rounded-full hover:bg-gray-200",title:"Okundu işaretle",children:(0,s.jsx)(b.Z,{className:"h-3 w-3 text-gray-500"})}),(0,s.jsx)("div",{className:"w-2 h-2",children:!e.read&&(0,s.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full"})})]})]})})]},e.id)})}),e.length>0&&(0,s.jsx)("div",{className:"border-t p-2",children:(0,s.jsx)(y.z,{variant:"ghost",size:"sm",className:"w-full text-center",asChild:!0,children:(0,s.jsx)("a",{href:"/notifications",children:"T\xfcm bildirimleri g\xf6r"})})})]})]})}function es(){var e,t;let[a,n]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(null),{supabase:S}=(0,g.useSupabase)(),z=(0,l.useRouter)();(0,r.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await S.auth.getSession();if(w(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),null==t?void 0:t.user){let{data:e}=await S.from("profiles").select("*").eq("id",t.user.id).single();C(e)}})();let{data:{subscription:e}}=S.auth.onAuthStateChange(async(e,t)=>{var a;if(w(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),null==t?void 0:t.user){let{data:e}=await S.from("profiles").select("*").eq("id",t.user.id).single();C(e)}else C(null)});return()=>e.unsubscribe()},[S]);let Z=async()=>{await S.auth.signOut(),z.push("/")},_=[{name:"Ana Sayfa",href:"/",icon:c.Z},{name:"Forum",href:"/forum",icon:o.Z},{name:"Eğitim",href:"/education",icon:d.Z},{name:"Eğlence",href:"/entertainment",icon:m.Z},{name:"Etkinlikler",href:"/events",icon:m.Z}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200 bg-white/80 backdrop-blur-md",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)(i(),{href:"/",className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-primary",children:(0,s.jsx)("span",{className:"text-sm font-bold text-white",children:"LF"})}),(0,s.jsx)("span",{className:"hidden font-bold text-gray-900 sm:block",children:"Lise Forumu"})]})}),(0,s.jsx)("nav",{className:"hidden md:flex items-center space-x-1",children:_.map(e=>(0,s.jsxs)(i(),{href:e.href,className:"flex items-center space-x-2 rounded-lg px-3 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100 hover:text-gray-900",children:[(0,s.jsx)(e.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.name})]},e.name))}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(y.z,{variant:"ghost",size:"sm",onClick:()=>n(!0),className:"hidden sm:flex",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Ara..."}),(0,s.jsx)("kbd",{className:"ml-2 hidden rounded bg-gray-100 px-1.5 py-0.5 text-xs text-gray-500 lg:block",children:"⌘K"})]}),(0,s.jsx)(y.z,{variant:"ghost",size:"sm",onClick:()=>n(!0),className:"sm:hidden",children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})}),b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ea,{}),(0,s.jsxs)(V,{children:[(0,s.jsx)(V.Trigger,{asChild:!0,children:(0,s.jsx)(y.z,{variant:"ghost",size:"sm",className:"relative",children:(0,s.jsx)(v.q,{src:null==k?void 0:k.avatar_url,alt:(null==k?void 0:k.display_name)||(null==k?void 0:k.username),fallback:(null==k?void 0:null===(t=k.username)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.toUpperCase())||"U",size:"sm"})})}),(0,s.jsxs)(V.Content,{align:"end",className:"w-56",children:[(0,s.jsx)(V.Label,{children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:(null==k?void 0:k.display_name)||(null==k?void 0:k.username)}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:b.email})]})}),(0,s.jsx)(V.Separator,{}),(0,s.jsx)(V.Item,{asChild:!0,children:(0,s.jsxs)(i(),{href:"/profile",className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Profil"]})}),(0,s.jsx)(V.Item,{asChild:!0,children:(0,s.jsxs)(i(),{href:"/settings",className:"flex items-center",children:[(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Ayarlar"]})}),(0,s.jsx)(V.Separator,{}),(0,s.jsxs)(V.Item,{onClick:Z,className:"text-red-600",children:[(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"\xc7ıkış Yap"]})]})]})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(y.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,s.jsx)(i(),{href:"/auth/login",children:"Giriş"})}),(0,s.jsx)(y.z,{size:"sm",asChild:!0,children:(0,s.jsx)(i(),{href:"/auth/register",children:"Kayıt Ol"})})]}),(0,s.jsx)(y.z,{variant:"ghost",size:"sm",onClick:()=>N(!0),className:"md:hidden",children:(0,s.jsx)(p.Z,{className:"h-4 w-4"})})]})]})})}),(0,s.jsx)(H,{isOpen:a,onClose:()=>n(!1)}),(0,s.jsx)(U,{isOpen:j,onClose:()=>N(!1),navigation:_,user:b,profile:k,onSignOut:Z})]})}},5808:function(e,t,a){a.d(t,{q:function(){return i}});var s=a(7437);a(2265);var r=a(1465),n=a(2169);function i(e){let{src:t,alt:a="",fallback:i="?",size:l="md",className:c}=e,o={xs:"h-6 w-6 text-xs",sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg",xl:"h-16 w-16 text-xl"},d=o[l]||o.md;return(0,s.jsxs)(r.fC,{className:(0,n.cn)("relative flex shrink-0 overflow-hidden rounded-full",d,c),children:[(0,s.jsx)(r.Ee,{src:t,alt:a,className:"aspect-square h-full w-full object-cover"}),(0,s.jsx)(r.NY,{className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted font-medium",d),children:i})]})}},3277:function(e,t,a){a.d(t,{C:function(){return l}});var s=a(7437);a(2265);var r=a(6061),n=a(2169);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary-500 text-white hover:bg-primary-600",secondary:"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-200",destructive:"border-transparent bg-error-500 text-white hover:bg-error-600",outline:"text-gray-900 border-gray-300 hover:bg-gray-50",success:"border-transparent bg-success-500 text-white hover:bg-success-600",warning:"border-transparent bg-warning-500 text-white hover:bg-warning-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...r})}},575:function(e,t,a){a.d(t,{z:function(){return o}});var s=a(7437),r=a(2265),n=a(7256),i=a(6061),l=a(2169);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-500 text-white shadow hover:bg-primary-600 hover:shadow-md",destructive:"bg-error-500 text-white shadow hover:bg-error-600",outline:"border border-gray-300 bg-white shadow-sm hover:bg-gray-50 hover:shadow-md",secondary:"bg-secondary-500 text-white shadow hover:bg-secondary-600 hover:shadow-md",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-primary-500 underline-offset-4 hover:underline",gradient:"bg-gradient-primary text-white shadow hover:shadow-md hover:scale-105"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:o=!1,...d}=e,m=o?n.g7:"button";return(0,s.jsx)(m,{className:(0,l.cn)(c({variant:r,size:i,className:a})),ref:t,...d})});o.displayName="Button"},5671:function(e,t,a){a.d(t,{Zb:function(){return i}});var s=a(7437),r=a(2265),n=a(2169);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border border-gray-200 bg-white shadow-soft",a),...r})});i.displayName="Card",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-gray-600",a),...r})}).displayName="CardDescription",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})}).displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},1097:function(e,t,a){a.d(t,{OQ:function(){return n}});var s=a(3082),r=a(1492);let n=(0,s.createClientComponentClient)();(0,r.eI)("https://owwucdnfvzrwrqxseuyg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93d3VjZG5mdnpyd3JxeHNldXlnIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Mjk1NzQ4MSwiZXhwIjoyMDY4NTMzNDgxfQ.31D4tpg5GwLGSZNbgiU4d7WEQBszkN6L19HkN3PY7Yo",{auth:{autoRefreshToken:!1,persistSession:!1}}),n.storage.from("avatars"),n.storage.from("media"),n.storage.from("documents")},2169:function(e,t,a){a.d(t,{Ds:function(){return m},SY:function(){return l},cn:function(){return n},g:function(){return d},p6:function(){return i},uf:function(){return c},vs:function(){return o}});var s=a(7042),r=a(4769);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}function i(e){return new Intl.DateTimeFormat("tr-TR",{day:"numeric",month:"long",year:"numeric"}).format(new Date(e))}function l(e){let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/1e3);if(s<60)return"Az \xf6nce";let r=Math.floor(s/60);if(r<60)return"".concat(r," dakika \xf6nce");let n=Math.floor(r/60);if(n<24)return"".concat(n," saat \xf6nce");let i=Math.floor(n/24);if(i<7)return"".concat(i," g\xfcn \xf6nce");let l=Math.floor(i/7);if(l<4)return"".concat(l," hafta \xf6nce");let c=Math.floor(i/30);return c<12?"".concat(c," ay \xf6nce"):"".concat(Math.floor(i/365)," yıl \xf6nce")}function c(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function o(e){return({9:"9. Sınıf",10:"10. Sınıf",11:"11. Sınıf",12:"12. Sınıf"})[e]||"Bilinmiyor"}function d(e,t){if(!e.length||!t.length)return 0;let a=e.filter(e=>t.includes(e)),s=new Set([...e,...t]).size;return Math.round(a.length/s*100)}function m(e,t){let a;return function(){for(var s=arguments.length,r=Array(s),n=0;n<s;n++)r[n]=arguments[n];clearTimeout(a),a=setTimeout(()=>e(...r),t)}}}}]);