(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{1229:function(e,s,t){Promise.resolve().then(t.bind(t,4522)),Promise.resolve().then(t.t.bind(t,5250,23)),Promise.resolve().then(t.bind(t,3631)),Promise.resolve().then(t.bind(t,1666)),Promise.resolve().then(t.bind(t,8843)),Promise.resolve().then(t.bind(t,6945)),Promise.resolve().then(t.bind(t,8431))},3631:function(e,s,t){"use strict";t.r(s),t.d(s,{PhotoContest:function(){return w}});var a=t(7437),r=t(2265),i=t(2167),l=t(5251),n=t(4035),c=t(4958),d=t(6781),o=t(5750),m=t(2505),u=t(1541),h=t(9670),x=t(7810),f=t(5671),g=t(575),p=t(3277),v=t(5808),j=t(4840),y=t(1168),N=t(2169);function w(){var e;let[s,t]=(0,r.useState)(null),[w,b]=(0,r.useState)(!0),[_,k]=(0,r.useState)(null),[Z,C]=(0,r.useState)(!1),{supabase:E}=(0,j.useSupabase)(),{user:S}=(0,y.a)();(0,r.useEffect)(()=>{z()},[]);let z=async()=>{try{let{data:e,error:s}=await E.from("photo_contests").select("\n          *,\n          photo_entries(\n            *,\n            profiles(username, avatar_url),\n            photo_votes(count)\n          )\n        ").eq("status","active").order("created_at",{ascending:!1}).limit(1).single();if(s&&"PGRST116"!==s.code)throw s;if(e){let s=await Promise.all((e.photo_entries||[]).map(async e=>{let{data:s}=await E.from("photo_votes").select("id").eq("entry_id",e.id),{data:t}=await E.from("photo_views").select("id").eq("entry_id",e.id),a=!1;if(S){let{data:s}=await E.from("photo_votes").select("id").eq("entry_id",e.id).eq("user_id",S.id).single();a=!!s}return{id:e.id,image_url:e.image_url,title:e.title,description:e.description,user:{id:e.user_id,username:e.profiles.username,avatar_url:e.profiles.avatar_url},votes:(null==s?void 0:s.length)||0,views:(null==t?void 0:t.length)||0,created_at:e.created_at,user_voted:a}}));s.sort((e,s)=>s.votes-e.votes),t({id:e.id,title:e.title,description:e.description,theme:e.theme,start_date:e.start_date,end_date:e.end_date,max_entries:e.max_entries,current_entries:s.length,status:e.status,prize_description:e.prize_description,entries:s})}}catch(e){console.error("Error fetching contest:",e)}finally{b(!1)}},P=async e=>{if(S)try{let{error:s}=await E.from("photo_votes").insert({entry_id:e,user_id:S.id});if(s)throw s;await z()}catch(e){console.error("Error voting:",e)}},q=async e=>{if(S&&s){C(!0);try{let t=e.name.split(".").pop(),a="".concat(S.id,"-").concat(Date.now(),".").concat(t),r="contest-photos/".concat(a),{error:i}=await E.storage.from("photos").upload(r,e);if(i)throw i;let{data:{publicUrl:l}}=E.storage.from("photos").getPublicUrl(r),{error:n}=await E.from("photo_entries").insert({contest_id:s.id,user_id:S.id,image_url:l,title:"".concat(S.id,"'s Entry"),description:"Contest entry"});if(n)throw n;await z()}catch(e){console.error("Error uploading photo:",e)}finally{C(!1)}}};return w?(0,a.jsx)(f.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[...Array(6)].map((e,s)=>(0,a.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg"},s))})]})}):s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(f.Zb,{className:"overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.Z,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"font-semibold",children:"Fotoğraf Yarışması"})]}),(0,a.jsxs)(p.C,{variant:"secondary",className:"bg-white/20 text-white",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3 mr-1"}),(()=>{if(!s)return"";let e=new Date(s.end_date).getTime()-new Date().getTime();if(e<=0)return"S\xfcresi doldu";let t=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5);return t>0?"".concat(t," g\xfcn ").concat(a," saat"):"".concat(a," saat")})()]})]}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:s.title}),(0,a.jsx)("p",{className:"text-white/90 mb-4",children:s.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Tema: ",s.theme]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[s.current_entries,"/",s.max_entries," katılım"]})]})]}),s.prize_description&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-white/10 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"\xd6d\xfcl"})]}),(0,a.jsx)("p",{className:"text-sm",children:s.prize_description})]})]}),S&&s.current_entries<s.max_entries&&(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Fotoğrafını Paylaş"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:['Tema: "',s.theme,'" ile ilgili fotoğrafını y\xfckle']})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&q(t)},className:"hidden",id:"photo-upload"}),(0,a.jsx)(g.z,{asChild:!0,disabled:Z,className:"cursor-pointer",children:(0,a.jsxs)("label",{htmlFor:"photo-upload",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),Z?"Y\xfckleniyor...":"Fotoğraf Y\xfckle"]})})]})]})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,a.jsx)(i.M,{children:s.entries.map((e,s)=>{var t;return(0,a.jsx)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*s},children:(0,a.jsxs)(f.Zb,{className:"overflow-hidden group hover:shadow-lg transition-all duration-300",children:[s<3&&(0,a.jsx)("div",{className:"absolute top-2 left-2 z-10",children:(0,a.jsxs)(p.C,{variant:0===s?"default":"secondary",className:"".concat(0===s?"bg-yellow-500":1===s?"bg-gray-400":"bg-orange-600"," text-white"),children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),"#",s+1]})}),(0,a.jsxs)("div",{className:"aspect-square bg-gray-100 cursor-pointer relative overflow-hidden",onClick:()=>k(e),children:[(0,a.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300"})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.q,{src:e.user.avatar_url,alt:e.user.username,fallback:null===(t=e.user.username[0])||void 0===t?void 0:t.toUpperCase(),size:"sm"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.user.username})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3 text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(h.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.views})]})})]}),(0,a.jsxs)(g.z,{variant:e.user_voted?"default":"outline",size:"sm",className:"w-full",onClick:()=>!e.user_voted&&P(e.id),disabled:!S||e.user_voted,children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2 ".concat(e.user_voted?"fill-current":"")}),e.votes," ",e.user_voted?"Oy verdin":"Oy ver"]})]})]})},e.id)})})}),(0,a.jsx)(i.M,{children:_&&(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:()=>k(null),children:(0,a.jsxs)(l.E.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"max-w-4xl max-h-[90vh] bg-white rounded-xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("img",{src:_.image_url,alt:_.title,className:"w-full h-auto max-h-[70vh] object-contain"}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(v.q,{src:_.user.avatar_url,alt:_.user.username,fallback:null===(e=_.user.username[0])||void 0===e?void 0:e.toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:_.user.username}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,N.SY)(_.created_at)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-gray-600",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:_.views})]}),(0,a.jsxs)(g.z,{variant:_.user_voted?"default":"outline",onClick:()=>!_.user_voted&&P(_.id),disabled:!S||_.user_voted,children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2 ".concat(_.user_voted?"fill-current":"")}),_.votes]})]})]})})]})})})]}):(0,a.jsxs)(f.Zb,{className:"p-6 text-center",children:[(0,a.jsx)(n.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aktif fotoğraf yarışması yok"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Yeni yarışmalar i\xe7in takipte kal!"})]})}},8843:function(e,s,t){"use strict";t.r(s),t.d(s,{MemeGenerator:function(){return N}});var a=t(7437),r=t(2265),i=t(5251),l=t(5632),n=t(5790),c=t(1541),d=t(9764),o=t(6245),m=t(5817),u=t(5432),h=t(5671),x=t(575),f=t(2782),g=t(3277),p=t(9497),v=t(4840),j=t(1168);let y=[{id:"1",name:"Drake Pointing",image_url:"/meme-templates/drake.jpg",text_areas:[{x:50,y:20,width:45,height:30},{x:50,y:55,width:45,height:30}],usage_count:1250,category:"reaction"},{id:"2",name:"Distracted Boyfriend",image_url:"/meme-templates/distracted-boyfriend.jpg",text_areas:[{x:10,y:85,width:25,height:10,default_text:"Girlfriend"},{x:40,y:85,width:25,height:10,default_text:"Me"},{x:70,y:85,width:25,height:10,default_text:"Other thing"}],usage_count:980,category:"choice"},{id:"3",name:"Woman Yelling at Cat",image_url:"/meme-templates/woman-cat.jpg",text_areas:[{x:5,y:10,width:40,height:20},{x:55,y:10,width:40,height:20}],usage_count:756,category:"argument"},{id:"4",name:"This is Fine",image_url:"/meme-templates/this-is-fine.jpg",text_areas:[{x:10,y:80,width:80,height:15}],usage_count:642,category:"situation"}];function N(){let[e,s]=(0,r.useState)(null),[t,N]=(0,r.useState)([]),[w,b]=(0,r.useState)(""),[_,k]=(0,r.useState)([]),[Z,C]=(0,r.useState)(!1),[E,S]=(0,r.useState)("templates"),z=(0,r.useRef)(null),{supabase:P}=(0,v.useSupabase)(),{user:q}=(0,j.a)();(0,r.useEffect)(()=>{M()},[]),(0,r.useEffect)(()=>{e&&(N(Array(e.text_areas.length).fill("")),O())},[e]),(0,r.useEffect)(()=>{(e||w)&&O()},[t,e,w]);let M=async()=>{try{let{data:e,error:s}=await P.from("created_memes").select("\n          *,\n          profiles(username, avatar_url),\n          meme_likes(count)\n        ").order("created_at",{ascending:!1}).limit(12);if(s)throw s;let t=await Promise.all((e||[]).map(async e=>{let{data:s}=await P.from("meme_likes").select("id").eq("meme_id",e.id),{data:t}=await P.from("meme_shares").select("id").eq("meme_id",e.id),a=!1;if(q){let{data:s}=await P.from("meme_likes").select("id").eq("meme_id",e.id).eq("user_id",q.id).single();a=!!s}return{id:e.id,template_id:e.template_id,image_url:e.image_url,texts:e.texts,created_by:{id:e.user_id,username:e.profiles.username,avatar_url:e.profiles.avatar_url},likes:(null==s?void 0:s.length)||0,shares:(null==t?void 0:t.length)||0,created_at:e.created_at,user_liked:a}}));k(t)}catch(e){console.error("Error fetching memes:",e)}},O=()=>{let s=z.current;if(!s)return;let a=s.getContext("2d");if(!a)return;let r=new Image;r.crossOrigin="anonymous",r.onload=()=>{s.width=500,s.height=r.height/r.width*500,a.drawImage(r,0,0,s.width,s.height),e&&e.text_areas.forEach((e,r)=>{let i=t[r]||e.default_text||"";i&&T(a,i,e,s.width,s.height)})},r.src=(null==e?void 0:e.image_url)||w},T=(e,s,t,a,r)=>{let i=t.x/100*a,l=t.y/100*r,n=t.width/100*a;e.font="bold 24px Impact, Arial Black, sans-serif",e.fillStyle="white",e.strokeStyle="black",e.lineWidth=2,e.textAlign="center",e.textBaseline="middle";let c=s.toUpperCase().split(" "),d=[],o="";c.forEach(s=>{let t=o+(o?" ":"")+s;e.measureText(t).width>n&&o?(d.push(o),o=s):o=t}),o&&d.push(o);let m=l-(d.length-1)*30/2;d.forEach((s,t)=>{let a=m+30*t;e.strokeText(s,i,a),e.fillText(s,i,a)})},D=async()=>{if(q&&z.current){C(!0);try{let a=z.current,r=await new Promise(e=>{a.toBlob(s=>e(s),"image/png")}),i="meme-".concat(q.id,"-").concat(Date.now(),".png"),{error:l}=await P.storage.from("memes").upload(i,r);if(l)throw l;let{data:{publicUrl:n}}=P.storage.from("memes").getPublicUrl(i),{error:c}=await P.from("created_memes").insert({template_id:null==e?void 0:e.id,image_url:n,texts:t,user_id:q.id});if(c)throw c;await M(),N([]),s(null),b("")}catch(e){console.error("Error saving meme:",e)}finally{C(!1)}}},R=async e=>{if(q)try{let s=_.find(s=>s.id===e);if(!s)return;s.user_liked?await P.from("meme_likes").delete().eq("meme_id",e).eq("user_id",q.id):await P.from("meme_likes").insert({meme_id:e,user_id:q.id}),await M()}catch(e){console.error("Error liking meme:",e)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(h.Zb,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,a.jsx)(l.Z,{className:"h-6 w-6 text-primary-600"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Meme Oluşturucu"}),(0,a.jsxs)(g.C,{variant:"secondary",children:[(0,a.jsx)(n.Z,{className:"h-3 w-3 mr-1"}),"Pop\xfcler"]})]}),(0,a.jsxs)(p.mQ,{value:E,onValueChange:S,children:[(0,a.jsxs)(p.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(p.SP,{value:"templates",children:"Şablonlar"}),(0,a.jsx)(p.SP,{value:"custom",children:"\xd6zel Resim"}),(0,a.jsx)(p.SP,{value:"gallery",children:"Galeri"})]}),(0,a.jsxs)(p.nU,{value:"templates",className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Pop\xfcler Şablonlar"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.map(t=>(0,a.jsxs)(i.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"cursor-pointer rounded-lg overflow-hidden border-2 transition-colors ".concat((null==e?void 0:e.id)===t.id?"border-primary-500":"border-gray-200 hover:border-gray-300"),onClick:()=>s(t),children:[(0,a.jsx)("img",{src:t.image_url,alt:t.name,className:"w-full h-32 object-cover"}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 truncate",children:t.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[t.usage_count," kullanım"]})]})]},t.id))})]}),e&&(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Metinleri D\xfczenle"}),e.text_areas.map((e,s)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Metin ",s+1]}),(0,a.jsx)(f.I,{value:t[s]||"",onChange:e=>{let a=[...t];a[s]=e.target.value,N(a)},placeholder:e.default_text||"Metin ".concat(s+1),className:"w-full"})]},s))]})]}),(0,a.jsxs)(p.nU,{value:"custom",className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Kendi Resmini Y\xfckle"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let r=new FileReader;r.onload=e=>{var t;b(null===(t=e.target)||void 0===t?void 0:t.result),s(null),N([""])},r.readAsDataURL(a)},className:"hidden",id:"custom-image-upload"}),(0,a.jsxs)("label",{htmlFor:"custom-image-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Resim y\xfcklemek i\xe7in tıkla"})]})]})]}),w&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Metin Ekle"}),(0,a.jsx)(f.I,{value:t[0]||"",onChange:e=>N([e.target.value]),placeholder:"Meme metni",className:"w-full"})]})]}),(0,a.jsx)(p.nU,{value:"gallery",className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Son Oluşturulan Meme'ler"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(e=>(0,a.jsxs)(h.Zb,{className:"overflow-hidden",children:[(0,a.jsx)("img",{src:e.image_url,alt:"Meme",className:"w-full h-48 object-cover"}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["@",e.created_by.username]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(x.z,{variant:"ghost",size:"sm",onClick:()=>R(e.id),className:e.user_liked?"text-red-500":"text-gray-500",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-1"}),e.likes]}),(0,a.jsxs)(x.z,{variant:"ghost",size:"sm",className:"text-gray-500",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),e.shares]})]})]})})]},e.id))})]})})]})]})}),(e||w)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(h.Zb,{className:"p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"\xd6nizleme"}),(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 flex justify-center",children:(0,a.jsx)("canvas",{ref:z,className:"max-w-full h-auto border border-gray-300 rounded"})})]}),(0,a.jsxs)(h.Zb,{className:"p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"İşlemler"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(x.z,{onClick:D,disabled:Z||!q,className:"w-full",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),Z?"Kaydediliyor...":"Kaydet ve Paylaş"]}),(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>{let e=z.current;if(!e)return;let s=document.createElement("a");s.download="meme.png",s.href=e.toDataURL(),s.click()},className:"w-full",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"İndir"]}),(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>{N([]),s(null),b("")},className:"w-full",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Sıfırla"]}),!q&&(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Meme'ini kaydetmek i\xe7in giriş yap"}),(0,a.jsx)(x.z,{size:"sm",asChild:!0,children:(0,a.jsx)("a",{href:"/auth/login",children:"Giriş Yap"})})]})]})]})]})]})}},6945:function(e,s,t){"use strict";t.r(s),t.d(s,{MusicPlayer:function(){return C}});var a=t(7437),r=t(2265),i=t(2167),l=t(5251),n=t(7187),c=t(7810),d=t(9764),o=t(629),m=t(4149),u=t(3101),h=t(4900),x=t(8119),f=t(6232),g=t(4698),p=t(1243),v=t(4689),j=t(5671),y=t(575),N=t(6697),w=t(2169);let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)(N.fC,{ref:s,className:(0,w.cn)("relative flex w-full touch-none select-none items-center",t),...r,children:[(0,a.jsx)(N.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-200",children:(0,a.jsx)(N.e6,{className:"absolute h-full bg-primary-500"})}),(0,a.jsx)(N.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary-500 bg-white ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});b.displayName=N.fC.displayName;var _=t(5808),k=t(4840),Z=t(1168);function C(){var e;let[s,t]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1),[C,E]=(0,r.useState)(0),[S,z]=(0,r.useState)(0),[P,q]=(0,r.useState)(1),[M,O]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1),[R,U]=(0,r.useState)("none"),[A,I]=(0,r.useState)([]),[L,Q]=(0,r.useState)(0),[F,Y]=(0,r.useState)(!1),G=(0,r.useRef)(null),{supabase:B}=(0,k.useSupabase)(),{user:K}=(0,Z.a)();(0,r.useEffect)(()=>{V()},[]),(0,r.useEffect)(()=>{let e=G.current;if(!e)return;let s=()=>E(e.currentTime),t=()=>z(e.duration),a=()=>W();return e.addEventListener("timeupdate",s),e.addEventListener("loadedmetadata",t),e.addEventListener("ended",a),()=>{e.removeEventListener("timeupdate",s),e.removeEventListener("loadedmetadata",t),e.removeEventListener("ended",a)}},[s]);let V=async()=>{try{let{data:e,error:a}=await B.from("shared_tracks").select("\n          *,\n          profiles(username, avatar_url),\n          track_likes(count)\n        ").order("created_at",{ascending:!1}).limit(20);if(a)throw a;let r=await Promise.all((e||[]).map(async e=>{let{data:s}=await B.from("track_likes").select("id").eq("track_id",e.id),t=!1;if(K){let{data:s}=await B.from("track_likes").select("id").eq("track_id",e.id).eq("user_id",K.id).single();t=!!s}return{id:e.id,title:e.title,artist:e.artist,album:e.album,duration:e.duration,preview_url:e.preview_url,spotify_id:e.spotify_id,youtube_id:e.youtube_id,image_url:e.image_url,shared_by:{id:e.user_id,username:e.profiles.username,avatar_url:e.profiles.avatar_url},likes:(null==s?void 0:s.length)||0,user_liked:t,created_at:e.created_at}}));I(r),r.length>0&&!s&&t(r[0])}catch(e){console.error("Error fetching tracks:",e)}},W=()=>{let e;0!==A.length&&(Q(e=T?Math.floor(Math.random()*A.length):(L+1)%A.length),t(A[e]),w(!0))},H=async e=>{if(K)try{let s=A.find(s=>s.id===e);if(!s)return;s.user_liked?await B.from("track_likes").delete().eq("track_id",e).eq("user_id",K.id):await B.from("track_likes").insert({track_id:e,user_id:K.id}),await V()}catch(e){console.error("Error liking track:",e)}},J=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return s?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("audio",{ref:G,src:s.preview_url,onPlay:()=>w(!0),onPause:()=>w(!1)}),(0,a.jsx)(j.Zb,{className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center overflow-hidden",children:s.image_url?(0,a.jsx)("img",{src:s.image_url,alt:s.title,className:"w-full h-full object-cover"}):(0,a.jsx)(n.Z,{className:"h-8 w-8 text-white/60"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg truncate",children:s.title}),(0,a.jsx)("p",{className:"text-white/80 truncate",children:s.artist}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)(_.q,{src:s.shared_by.avatar_url,alt:s.shared_by.username,fallback:null===(e=s.shared_by.username[0])||void 0===e?void 0:e.toUpperCase(),size:"xs"}),(0,a.jsxs)("span",{className:"text-xs text-white/60",children:[s.shared_by.username," tarafından paylaşıldı"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(y.z,{variant:"ghost",size:"sm",onClick:()=>H(s.id),className:"text-white hover:bg-white/20",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 ".concat(s.user_liked?"fill-current text-red-400":"")}),(0,a.jsx)("span",{className:"ml-1",children:s.likes})]}),(0,a.jsx)(y.z,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)(b,{value:[S>0?C/S*100:0],onValueChange:e=>{let s=G.current;if(!s)return;let t=e[0]/100*S;s.currentTime=t,E(t)},className:"w-full",max:100,step:1}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-white/60",children:[(0,a.jsx)("span",{children:J(C)}),(0,a.jsx)("span",{children:J(S)})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4 mt-4",children:[(0,a.jsx)(y.z,{variant:"ghost",size:"sm",onClick:()=>D(!T),className:"text-white hover:bg-white/20 ".concat(T?"bg-white/20":""),children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})}),(0,a.jsx)(y.z,{variant:"ghost",size:"sm",onClick:()=>{let e;0!==A.length&&(Q(e=T?Math.floor(Math.random()*A.length):0===L?A.length-1:L-1),t(A[e]),w(!0))},className:"text-white hover:bg-white/20",children:(0,a.jsx)(m.Z,{className:"h-5 w-5"})}),(0,a.jsx)(y.z,{variant:"ghost",size:"lg",onClick:()=>{let e=G.current;e&&(null==s?void 0:s.preview_url)&&(N?e.pause():e.play(),w(!N))},className:"text-white hover:bg-white/20 bg-white/10",disabled:!s.preview_url,children:N?(0,a.jsx)(u.Z,{className:"h-6 w-6"}):(0,a.jsx)(h.Z,{className:"h-6 w-6"})}),(0,a.jsx)(y.z,{variant:"ghost",size:"sm",onClick:W,className:"text-white hover:bg-white/20",children:(0,a.jsx)(x.Z,{className:"h-5 w-5"})}),(0,a.jsxs)(y.z,{variant:"ghost",size:"sm",onClick:()=>{let e=["none","one","all"],s=e.indexOf(R);U(e[(s+1)%e.length])},className:"text-white hover:bg-white/20 ".concat("none"!==R?"bg-white/20":""),children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),"one"===R&&(0,a.jsx)("span",{className:"ml-1 text-xs",children:"1"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-4",children:[(0,a.jsx)(y.z,{variant:"ghost",size:"sm",onClick:()=>{let e=G.current;e&&(M?(e.volume=P,O(!1)):(e.volume=0,O(!0)))},className:"text-white hover:bg-white/20",children:M?(0,a.jsx)(g.Z,{className:"h-4 w-4"}):(0,a.jsx)(p.Z,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-24",children:(0,a.jsx)(b,{value:[M?0:100*P],onValueChange:e=>{let s=G.current;if(!s)return;let t=e[0]/100;s.volume=t,q(t),O(0===t)},max:100,step:1})}),(0,a.jsx)(y.z,{variant:"ghost",size:"sm",onClick:()=>Y(!F),className:"text-white hover:bg-white/20",children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(i.M,{children:F&&(0,a.jsx)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,a.jsxs)(j.Zb,{children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("h3",{className:"font-semibold text-gray-900",children:["\xc7alma Listesi (",A.length," şarkı)"]})}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:A.map((e,r)=>(0,a.jsx)("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ".concat(s.id===e.id?"bg-primary-50":""),onClick:()=>{t(e),Q(r),w(!0)},children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-200 rounded flex items-center justify-center overflow-hidden",children:e.image_url?(0,a.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"}):(0,a.jsx)(n.Z,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.artist})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(y.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),H(e.id)},children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 ".concat(e.user_liked?"fill-current text-red-500":"text-gray-400")}),(0,a.jsx)("span",{className:"ml-1 text-sm",children:e.likes})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:J(e.duration)})]})]})},e.id))})]})})})]}):(0,a.jsxs)(j.Zb,{className:"p-6 text-center",children:[(0,a.jsx)(n.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"M\xfczik y\xfckleniyor..."})]})}},8431:function(e,s,t){"use strict";t.r(s),t.d(s,{DailyPoll:function(){return v}});var a=t(7437),r=t(2265),i=t(2167),l=t(5251),n=t(7899),c=t(2457),d=t(5750),o=t(6141),m=t(5790),u=t(3008),h=t(5671),x=t(575),f=t(3277),g=t(4840),p=t(1168);function v(){let[e,s]=(0,r.useState)(null),[t,v]=(0,r.useState)(!0),[j,y]=(0,r.useState)(!1),[N,w]=(0,r.useState)(""),{supabase:b}=(0,g.useSupabase)(),{user:_}=(0,p.a)();(0,r.useEffect)(()=>{k()},[]);let k=async()=>{try{let{data:a,error:r}=await b.from("daily_polls").select("\n          *,\n          poll_options(*),\n          poll_votes(option_id)\n        ").eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).single();if(r)throw r;if(a){var e,t;let r=(null===(e=a.poll_votes)||void 0===e?void 0:e.length)||0,i=(null===(t=a.poll_options)||void 0===t?void 0:t.map(e=>{var s;let t=(null===(s=a.poll_votes)||void 0===s?void 0:s.filter(s=>s.option_id===e.id).length)||0;return{id:e.id,text:e.text,votes:t,percentage:r>0?t/r*100:0}}))||[],l=!1,n="";if(_){let{data:e}=await b.from("poll_votes").select("option_id").eq("poll_id",a.id).eq("user_id",_.id).single();e&&(l=!0,n=e.option_id)}s({id:a.id,question:a.question,description:a.description,options:i,total_votes:r,expires_at:a.expires_at,created_at:a.created_at,user_voted:l,user_vote_option:n,category:a.category,is_featured:a.is_featured})}}catch(e){console.error("Error fetching daily poll:",e)}finally{v(!1)}},Z=async s=>{if(_&&!j&&(null==e||!e.user_voted)){y(!0);try{if(!e)throw Error("No active poll found");let{error:t}=await b.from("poll_votes").insert({poll_id:e.id,option_id:s,user_id:_.id});if(t)throw t;await k()}catch(e){console.error("Error voting:",e)}finally{y(!1)}}},C=!!e&&new Date(e.expires_at)<new Date,E=e?new Date(e.expires_at).getTime()-new Date().getTime():0;return t?(0,a.jsx)(h.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-12 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-12 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-12 bg-gray-200 rounded"})]})]})}):e?(0,a.jsxs)(h.Zb,{className:"overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-primary p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium",children:"G\xfcn\xfcn Anketi"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.total_votes})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:C?"S\xfcresi doldu":"".concat(Math.max(0,Math.floor(E/36e5)),"s kaldı")})]})]})]}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.question}),e.description&&(0,a.jsx)("p",{className:"text-white/80 text-sm",children:e.description}),e.is_featured&&(0,a.jsxs)(f.C,{variant:"secondary",className:"mt-2",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3 mr-1"}),"\xd6ne \xc7ıkan"]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-3",children:[(0,a.jsx)(i.M,{children:e.options.map((s,t)=>{let r=e.user_vote_option===s.id,i=!e.user_voted&&!C&&_;return(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"relative overflow-hidden rounded-lg border-2 transition-all duration-200 ".concat(i?"border-gray-200 hover:border-primary-300 cursor-pointer hover:shadow-sm":"border-gray-200"," ").concat(r?"border-primary-500 bg-primary-50":"bg-white"),onClick:()=>i&&Z(s.id),children:[e.user_voted&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-100 to-transparent transition-all duration-1000",style:{width:"".concat(s.percentage,"%")}}),(0,a.jsxs)("div",{className:"relative p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[r&&(0,a.jsx)(u.Z,{className:"h-5 w-5 text-primary-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:s.text})]}),e.user_voted&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:[s.votes," oy"]}),(0,a.jsxs)("span",{className:"font-semibold",children:["%",Math.round(s.percentage)]})]})]})]},s.id)})}),!_&&(0,a.jsxs)("div",{className:"text-center pt-4",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-3",children:"Oy vermek i\xe7in giriş yapın"}),(0,a.jsx)(x.z,{asChild:!0,children:(0,a.jsx)("a",{href:"/auth/login",children:"Giriş Yap"})})]}),e.user_voted&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,a.jsxs)("span",{children:["Toplam ",e.total_votes," oy"]}),(0,a.jsx)("span",{children:"Oy verdin ✓"})]}),e.options.length>0&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"En pop\xfcler: "}),(0,a.jsx)("span",{className:"font-semibold text-primary-600",children:e.options.reduce((e,s)=>e.votes>s.votes?e:s).text})]})]})]})]}):(0,a.jsxs)(h.Zb,{className:"p-6 text-center",children:[(0,a.jsx)(n.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Bug\xfcn i\xe7in anket yok"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Yeni anketler i\xe7in geri gel!"})]})}},2782:function(e,s,t){"use strict";t.d(s,{I:function(){return l}});var a=t(7437),r=t(2265),i=t(2169);let l=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});l.displayName="Input"},9497:function(e,s,t){"use strict";t.d(s,{SP:function(){return d},dr:function(){return c},mQ:function(){return n},nU:function(){return o}});var a=t(7437),r=t(2265),i=t(4522),l=t(2169);let n=i.Root,c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.List,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});c.displayName=i.List.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.Trigger,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});d.displayName=i.Trigger.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.Content,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});o.displayName=i.Content.displayName},1168:function(e,s,t){"use strict";t.d(s,{a:function(){return l}});var a=t(2265),r=t(4033),i=t(1097);function l(){let[e,s]=(0,a.useState)({user:null,profile:null,loading:!0,error:null}),t=(0,r.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:t}=await i.OQ.auth.getSession();if(t){s(e=>({...e,error:t.message,loading:!1}));return}if(null==e?void 0:e.user){let{data:t,error:a}=await i.OQ.from("profiles").select("*").eq("id",e.user.id).single();a&&console.error("Error fetching profile:",a),s({user:e.user,profile:t||null,loading:!1,error:null})}else s(e=>({...e,loading:!1}))}catch(e){console.error("Error getting initial session:",e),s(e=>({...e,error:"Failed to load session",loading:!1}))}})();let{data:{subscription:e}}=i.OQ.auth.onAuthStateChange(async(e,t)=>{if("SIGNED_IN"===e&&(null==t?void 0:t.user)){let{data:e}=await i.OQ.from("profiles").select("*").eq("id",t.user.id).single();s({user:t.user,profile:e||null,loading:!1,error:null})}else"SIGNED_OUT"===e&&s({user:null,profile:null,loading:!1,error:null})});return()=>{e.unsubscribe()}},[]);let l=async(e,t)=>{s(e=>({...e,loading:!0,error:null}));try{let{error:a}=await i.OQ.auth.signInWithPassword({email:e,password:t});if(a)return s(e=>({...e,error:a.message,loading:!1})),{error:a};return{error:null}}catch(t){let e="An unexpected error occurred";return s(s=>({...s,error:e,loading:!1})),{error:{message:e}}}},n=async(e,t,a)=>{s(e=>({...e,loading:!0,error:null}));try{let{data:r,error:l}=await i.OQ.auth.signUp({email:e,password:t,options:{data:a}});if(l)return s(e=>({...e,error:l.message,loading:!1})),{error:l};return{data:r,error:null}}catch(t){let e="An unexpected error occurred";return s(s=>({...s,error:e,loading:!1})),{error:{message:e}}}},c=async()=>{s(e=>({...e,loading:!0}));try{let{error:e}=await i.OQ.auth.signOut();if(e){s(s=>({...s,error:e.message,loading:!1}));return}t.push("/")}catch(e){console.error("Error signing out:",e),s(e=>({...e,error:"Failed to sign out",loading:!1}))}},d=async t=>{if(!e.user)return{error:{message:"Not authenticated"}};try{let{data:a,error:r}=await i.OQ.from("profiles").update(t).eq("id",e.user.id).select().single();if(r)return{error:r};return s(e=>({...e,profile:a})),{data:a,error:null}}catch(e){return{error:{message:"Failed to update profile"}}}};return{...e,signIn:l,signUp:n,signOut:c,updateProfile:d,isAuthenticated:!!e.user}}}},function(e){e.O(0,[61,82,770,872,396,570,142,791,590,971,938,744],function(){return e(e.s=1229)}),_N_E=e.O()}]);