(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{8203:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},6142:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9883:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2245:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},3810:function(e,a,r){Promise.resolve().then(r.t.bind(r,5250,23)),Promise.resolve().then(r.bind(r,2824)),Promise.resolve().then(r.bind(r,1666))},2824:function(e,a,r){"use strict";r.r(a),r.d(a,{EventManager:function(){return O}});var s=r(7437),t=r(2265),i=r(2167),n=r(5251),l=r(8203),c=r(9883),o=r(1827),d=r(3021),u=r(6141),m=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,m.Z)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]),p=(0,m.Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var h=r(6142);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,m.Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);var f=r(5750),y=r(9764),v=r(2245),b=r(5671),j=r(575),_=r(2782),N=r(3277),w=r(9497),k=r(5808),C=r(4840),Z=r(1168),S=r(2169);let E=[{value:"academic",label:"Akademik",color:"bg-blue-100 text-blue-800"},{value:"social",label:"Sosyal",color:"bg-green-100 text-green-800"},{value:"sports",label:"Spor",color:"bg-orange-100 text-orange-800"},{value:"cultural",label:"K\xfclt\xfcrel",color:"bg-purple-100 text-purple-800"},{value:"online",label:"Online",color:"bg-indigo-100 text-indigo-800"}],q=["İstanbul","Ankara","İzmir","Bursa","Antalya","Adana","Konya","Gaziantep","Mersin","Kayseri"];function O(){let[e,a]=(0,t.useState)("events"),[r,m]=(0,t.useState)([]),[O,z]=(0,t.useState)([]),[L,A]=(0,t.useState)(!0),[M,P]=(0,t.useState)(""),[Q,D]=(0,t.useState)(""),[I,T]=(0,t.useState)(""),[U,R]=(0,t.useState)(!1),{supabase:Y}=(0,C.useSupabase)(),{user:G}=(0,Z.a)();(0,t.useEffect)(()=>{K()},[e,Q,I]);let K=async()=>{A(!0);try{"events"===e?await V():await B()}catch(e){console.error("Error fetching data:",e)}finally{A(!1)}},V=async()=>{let e=Y.from("events").select("\n        *,\n        profiles(username, avatar_url, school),\n        event_participants(\n          profiles(username, avatar_url)\n        )\n      ").gte("end_date",new Date().toISOString()).order("start_date",{ascending:!0});Q&&(e=e.eq("city",Q)),I&&(e=e.eq("event_type",I));let{data:a,error:r}=await e.limit(20);if(r)throw r;m(await Promise.all((a||[]).map(async e=>{var a;let r=(null===(a=e.event_participants)||void 0===a?void 0:a.map(e=>({id:e.user_id,username:e.profiles.username,avatar_url:e.profiles.avatar_url})))||[],s=!1,t=!1;if(G){let{data:a}=await Y.from("event_participants").select("id").eq("event_id",e.id).eq("user_id",G.id).single();s=!!a;let{data:r}=await Y.from("event_bookmarks").select("id").eq("event_id",e.id).eq("user_id",G.id).single();t=!!r}return{id:e.id,title:e.title,description:e.description,event_type:e.event_type,start_date:e.start_date,end_date:e.end_date,location:e.location,online_link:e.online_link,max_participants:e.max_participants,current_participants:r.length,created_by:{id:e.created_by,username:e.profiles.username,avatar_url:e.profiles.avatar_url,school:e.profiles.school},participants:r,is_participating:s,is_bookmarked:t,city:e.city,school:e.school,tags:e.tags||[],image_url:e.image_url,created_at:e.created_at}})))},B=async()=>{let{data:e,error:a}=await Y.from("announcements").select("\n        *,\n        profiles(username, avatar_url, role)\n      ").order("created_at",{ascending:!1}).limit(20);if(a)throw a;z((e||[]).map(e=>({id:e.id,title:e.title,content:e.content,type:e.type,priority:e.priority,target_audience:e.target_audience,school:e.school,city:e.city,created_by:{id:e.created_by,username:e.profiles.username,avatar_url:e.profiles.avatar_url,role:e.profiles.role||"user"},expires_at:e.expires_at,is_pinned:e.is_pinned,views:e.views||0,created_at:e.created_at})))},F=async e=>{if(G)try{let a=r.find(a=>a.id===e);if(!a)return;a.is_participating?await Y.from("event_participants").delete().eq("event_id",e).eq("user_id",G.id):await Y.from("event_participants").insert({event_id:e,user_id:G.id}),await V()}catch(e){console.error("Error joining/leaving event:",e)}},H=async e=>{if(G)try{let a=r.find(a=>a.id===e);if(!a)return;a.is_bookmarked?await Y.from("event_bookmarks").delete().eq("event_id",e).eq("user_id",G.id):await Y.from("event_bookmarks").insert({event_id:e,user_id:G.id}),await V()}catch(e){console.error("Error bookmarking event:",e)}},W=e=>E.find(a=>a.value===e)||E[0],J=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},X=e=>{let a=new Date(e),r=new Date,s=(a.getTime()-r.getTime())/36e5;return s<=24&&s>0},$=r.filter(e=>e.title.toLowerCase().includes(M.toLowerCase())||e.description.toLowerCase().includes(M.toLowerCase())||e.city.toLowerCase().includes(M.toLowerCase())),ee=O.filter(e=>e.title.toLowerCase().includes(M.toLowerCase())||e.content.toLowerCase().includes(M.toLowerCase()));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(b.Zb,{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)(l.Z,{className:"h-8 w-8"}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Etkinlik & Duyuru Merkezi"})]}),(0,s.jsx)("p",{className:"text-indigo-100 text-lg",children:"Yakındaki etkinlikleri keşfet, duyuruları takip et"})]}),G&&(0,s.jsxs)(j.z,{variant:"secondary",onClick:()=>R(!0),className:"bg-white/20 text-white hover:bg-white/30",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Etkinlik Oluştur"]})]})})}),(0,s.jsx)(b.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-1 min-w-64",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(_.I,{placeholder:"Etkinlik veya duyuru ara...",value:M,onChange:e=>P(e.target.value),className:"pl-10"})]})}),(0,s.jsxs)("select",{value:Q,onChange:e=>D(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"",children:"T\xfcm Şehirler"}),q.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:I,onChange:e=>T(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"",children:"T\xfcm T\xfcrler"}),E.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]})}),(0,s.jsxs)(w.mQ,{value:e,onValueChange:a,children:[(0,s.jsxs)(w.dr,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(w.SP,{value:"events",className:"flex items-center space-x-2",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Etkinlikler"})]}),(0,s.jsxs)(w.SP,{value:"announcements",className:"flex items-center space-x-2",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Duyurular"})]})]}),(0,s.jsx)(w.nU,{value:"events",className:"space-y-4",children:L?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(6)].map((e,a)=>(0,s.jsx)(b.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"})]})},a))}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,s.jsx)(i.M,{children:$.map((e,a)=>{var r;let t=W(e.event_type),i=X(e.start_date);return(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:(0,s.jsxs)(b.Zb,{className:"overflow-hidden hover:shadow-lg transition-all duration-300",children:[e.image_url&&(0,s.jsx)("div",{className:"h-48 bg-gray-200 overflow-hidden",children:(0,s.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:e.title}),i&&(0,s.jsxs)(N.C,{variant:"warning",className:"text-xs",children:[(0,s.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),"Yakında"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsx)(N.C,{className:t.color,children:t.label}),(0,s.jsx)(N.C,{variant:"outline",children:e.city})]})]}),(0,s.jsx)(j.z,{variant:"ghost",size:"sm",onClick:()=>H(e.id),className:e.is_bookmarked?"text-yellow-500":"text-gray-400",children:e.is_bookmarked?(0,s.jsx)(x,{className:"h-4 w-4"}):(0,s.jsx)(p,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[(0,S.p6)(e.start_date),e.start_date!==e.end_date&&" - ".concat((0,S.p6)(e.end_date))]})]}),e.location&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:e.location})]}),e.online_link&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(g,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Online Etkinlik"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[e.current_participants," katılımcı",e.max_participants&&" / ".concat(e.max_participants)]})]})]}),(0,s.jsx)("p",{className:"text-gray-700 text-sm mb-4 line-clamp-3",children:e.description}),e.tags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mb-4",children:e.tags.slice(0,3).map(e=>(0,s.jsxs)(N.C,{variant:"secondary",className:"text-xs",children:["#",e]},e))}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k.q,{src:e.created_by.avatar_url,alt:e.created_by.username,fallback:null===(r=e.created_by.username[0])||void 0===r?void 0:r.toUpperCase(),size:"xs"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.created_by.username})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(j.z,{variant:"ghost",size:"sm",className:"text-gray-500",children:(0,s.jsx)(y.Z,{className:"h-4 w-4"})}),(0,s.jsx)(j.z,{size:"sm",onClick:()=>F(e.id),disabled:!G||!!e.max_participants&&e.current_participants>=e.max_participants,variant:e.is_participating?"outline":"default",children:e.is_participating?"Ayrıl":"Katıl"})]})]})]})]})},e.id)})})})}),(0,s.jsx)(w.nU,{value:"announcements",className:"space-y-4",children:L?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsx)(b.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),(0,s.jsx)("div",{className:"h-16 bg-gray-200 rounded"})]})},a))}):(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(i.M,{children:ee.map((e,a)=>{var r;return(0,s.jsx)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},children:(0,s.jsxs)(b.Zb,{className:"p-6 hover:shadow-md transition-shadow ".concat(e.is_pinned?"border-l-4 border-l-primary-500":""),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),e.is_pinned&&(0,s.jsxs)(N.C,{variant:"default",children:[(0,s.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),"Sabitlenmiş"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsxs)(N.C,{className:J(e.priority),children:["urgent"===e.priority&&"Acil","high"===e.priority&&"Y\xfcksek","medium"===e.priority&&"Orta","low"===e.priority&&"D\xfcş\xfck"]}),(0,s.jsxs)(N.C,{variant:"outline",children:["general"===e.type&&"Genel","school"===e.type&&"Okul","exam"===e.type&&"Sınav","event"===e.type&&"Etkinlik"]})]})]}),(0,s.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[(0,s.jsx)("div",{children:(0,S.SY)(e.created_at)}),(0,s.jsxs)("div",{children:[e.views," g\xf6r\xfcnt\xfcleme"]})]})]}),(0,s.jsx)("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:e.content}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k.q,{src:e.created_by.avatar_url,alt:e.created_by.username,fallback:null===(r=e.created_by.username[0])||void 0===r?void 0:r.toUpperCase(),size:"xs"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e.created_by.username}),"admin"===e.created_by.role&&(0,s.jsx)(N.C,{variant:"success",className:"text-xs",children:"Y\xf6netici"})]}),e.expires_at&&(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Son: ",(0,S.p6)(e.expires_at)]})]})]})},e.id)})})})})]})]})}},2782:function(e,a,r){"use strict";r.d(a,{I:function(){return n}});var s=r(7437),t=r(2265),i=r(2169);let n=t.forwardRef((e,a)=>{let{className:r,type:t,...n}=e;return(0,s.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...n})});n.displayName="Input"},9497:function(e,a,r){"use strict";r.d(a,{SP:function(){return o},dr:function(){return c},mQ:function(){return l},nU:function(){return d}});var s=r(7437),t=r(2265),i=r(4522),n=r(2169);let l=i.Root,c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(i.List,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t})});c.displayName=i.List.displayName;let o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(i.Trigger,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t})});o.displayName=i.Trigger.displayName;let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(i.Content,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});d.displayName=i.Content.displayName},1168:function(e,a,r){"use strict";r.d(a,{a:function(){return n}});var s=r(2265),t=r(4033),i=r(1097);function n(){let[e,a]=(0,s.useState)({user:null,profile:null,loading:!0,error:null}),r=(0,t.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:r}=await i.OQ.auth.getSession();if(r){a(e=>({...e,error:r.message,loading:!1}));return}if(null==e?void 0:e.user){let{data:r,error:s}=await i.OQ.from("profiles").select("*").eq("id",e.user.id).single();s&&console.error("Error fetching profile:",s),a({user:e.user,profile:r||null,loading:!1,error:null})}else a(e=>({...e,loading:!1}))}catch(e){console.error("Error getting initial session:",e),a(e=>({...e,error:"Failed to load session",loading:!1}))}})();let{data:{subscription:e}}=i.OQ.auth.onAuthStateChange(async(e,r)=>{if("SIGNED_IN"===e&&(null==r?void 0:r.user)){let{data:e}=await i.OQ.from("profiles").select("*").eq("id",r.user.id).single();a({user:r.user,profile:e||null,loading:!1,error:null})}else"SIGNED_OUT"===e&&a({user:null,profile:null,loading:!1,error:null})});return()=>{e.unsubscribe()}},[]);let n=async(e,r)=>{a(e=>({...e,loading:!0,error:null}));try{let{error:s}=await i.OQ.auth.signInWithPassword({email:e,password:r});if(s)return a(e=>({...e,error:s.message,loading:!1})),{error:s};return{error:null}}catch(r){let e="An unexpected error occurred";return a(a=>({...a,error:e,loading:!1})),{error:{message:e}}}},l=async(e,r,s)=>{a(e=>({...e,loading:!0,error:null}));try{let{data:t,error:n}=await i.OQ.auth.signUp({email:e,password:r,options:{data:s}});if(n)return a(e=>({...e,error:n.message,loading:!1})),{error:n};return{data:t,error:null}}catch(r){let e="An unexpected error occurred";return a(a=>({...a,error:e,loading:!1})),{error:{message:e}}}},c=async()=>{a(e=>({...e,loading:!0}));try{let{error:e}=await i.OQ.auth.signOut();if(e){a(a=>({...a,error:e.message,loading:!1}));return}r.push("/")}catch(e){console.error("Error signing out:",e),a(e=>({...e,error:"Failed to sign out",loading:!1}))}},o=async r=>{if(!e.user)return{error:{message:"Not authenticated"}};try{let{data:s,error:t}=await i.OQ.from("profiles").update(r).eq("id",e.user.id).select().single();if(t)return{error:t};return a(e=>({...e,profile:s})),{data:s,error:null}}catch(e){return{error:{message:"Failed to update profile"}}}};return{...e,signIn:n,signUp:l,signOut:c,updateProfile:o,isAuthenticated:!!e.user}}}},function(e){e.O(0,[61,82,770,872,396,570,142,590,971,938,744],function(){return e(e.s=3810)}),_N_E=e.O()}]);