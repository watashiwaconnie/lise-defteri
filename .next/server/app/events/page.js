(()=>{var e={};e.id=38,e.ids=[38],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},3379:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>o});var t=r(482),a=r(9108),i=r(2563),n=r.n(i),l=r(8300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(s,c);let o=["",{children:["events",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4974)),"C:\\Users\\ummuh\\OneDrive\\Masa\xfcst\xfc\\lisedefteri\\src\\app\\events\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4608)),"C:\\Users\\ummuh\\OneDrive\\Masa\xfcst\xfc\\lisedefteri\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\ummuh\\OneDrive\\Masa\xfcst\xfc\\lisedefteri\\src\\app\\events\\page.tsx"],u="/events/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/events/page",pathname:"/events",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},756:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,1476,23)),Promise.resolve().then(r.bind(r,4929)),Promise.resolve().then(r.bind(r,7806))},5794:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(9224).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},508:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(9224).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},1838:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(9224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6755:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(9224).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},4929:(e,s,r)=>{"use strict";r.r(s),r.d(s,{EventManager:()=>P});var t=r(2295),a=r(3729),i=r(3644),n=r(7916),l=r(5794),c=r(1838),o=r(8765),d=r(3037),u=r(5545),m=r(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,m.Z)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]),p=(0,m.Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var g=r(508);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,m.Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);var y=r(9895),v=r(9151),f=r(6755),b=r(3673),j=r(5094),_=r(6540),N=r(9591),w=r(1467),k=r(4871),q=r(1858),C=r(3313),Z=r(1453);let S=[{value:"academic",label:"Akademik",color:"bg-blue-100 text-blue-800"},{value:"social",label:"Sosyal",color:"bg-green-100 text-green-800"},{value:"sports",label:"Spor",color:"bg-orange-100 text-orange-800"},{value:"cultural",label:"K\xfclt\xfcrel",color:"bg-purple-100 text-purple-800"},{value:"online",label:"Online",color:"bg-indigo-100 text-indigo-800"}],E=["İstanbul","Ankara","İzmir","Bursa","Antalya","Adana","Konya","Gaziantep","Mersin","Kayseri"];function P(){let[e,s]=(0,a.useState)("events"),[r,m]=(0,a.useState)([]),[P,O]=(0,a.useState)([]),[M,z]=(0,a.useState)(!0),[A,L]=(0,a.useState)(""),[D,U]=(0,a.useState)(""),[Q,T]=(0,a.useState)(""),[G,I]=(0,a.useState)(!1),{supabase:R}=(0,q.useSupabase)(),{user:Y}=(0,C.a)();(0,a.useEffect)(()=>{F()},[e,D,Q]);let F=async()=>{z(!0);try{"events"===e?await K():await V()}catch(e){console.error("Error fetching data:",e)}finally{z(!1)}},K=async()=>{let e=R.from("events").select(`
        *,
        profiles(username, avatar_url, school),
        event_participants(
          profiles(username, avatar_url)
        )
      `).gte("end_date",new Date().toISOString()).order("start_date",{ascending:!0});D&&(e=e.eq("city",D)),Q&&(e=e.eq("event_type",Q));let{data:s,error:r}=await e.limit(20);if(r)throw r;m(await Promise.all((s||[]).map(async e=>{let s=e.event_participants?.map(e=>({id:e.user_id,username:e.profiles.username,avatar_url:e.profiles.avatar_url}))||[],r=!1,t=!1;if(Y){let{data:s}=await R.from("event_participants").select("id").eq("event_id",e.id).eq("user_id",Y.id).single();r=!!s;let{data:a}=await R.from("event_bookmarks").select("id").eq("event_id",e.id).eq("user_id",Y.id).single();t=!!a}return{id:e.id,title:e.title,description:e.description,event_type:e.event_type,start_date:e.start_date,end_date:e.end_date,location:e.location,online_link:e.online_link,max_participants:e.max_participants,current_participants:s.length,created_by:{id:e.created_by,username:e.profiles.username,avatar_url:e.profiles.avatar_url,school:e.profiles.school},participants:s,is_participating:r,is_bookmarked:t,city:e.city,school:e.school,tags:e.tags||[],image_url:e.image_url,created_at:e.created_at}})))},V=async()=>{let{data:e,error:s}=await R.from("announcements").select(`
        *,
        profiles(username, avatar_url, role)
      `).order("created_at",{ascending:!1}).limit(20);if(s)throw s;O((e||[]).map(e=>({id:e.id,title:e.title,content:e.content,type:e.type,priority:e.priority,target_audience:e.target_audience,school:e.school,city:e.city,created_by:{id:e.created_by,username:e.profiles.username,avatar_url:e.profiles.avatar_url,role:e.profiles.role||"user"},expires_at:e.expires_at,is_pinned:e.is_pinned,views:e.views||0,created_at:e.created_at})))},$=async e=>{if(Y)try{let s=r.find(s=>s.id===e);if(!s)return;s.is_participating?await R.from("event_participants").delete().eq("event_id",e).eq("user_id",Y.id):await R.from("event_participants").insert({event_id:e,user_id:Y.id}),await K()}catch(e){console.error("Error joining/leaving event:",e)}},B=async e=>{if(Y)try{let s=r.find(s=>s.id===e);if(!s)return;s.is_bookmarked?await R.from("event_bookmarks").delete().eq("event_id",e).eq("user_id",Y.id):await R.from("event_bookmarks").insert({event_id:e,user_id:Y.id}),await K()}catch(e){console.error("Error bookmarking event:",e)}},H=e=>S.find(s=>s.value===e)||S[0],W=e=>{switch(e){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},X=e=>{let s=new Date(e),r=new Date,t=(s.getTime()-r.getTime())/36e5;return t<=24&&t>0},J=r.filter(e=>e.title.toLowerCase().includes(A.toLowerCase())||e.description.toLowerCase().includes(A.toLowerCase())||e.city.toLowerCase().includes(A.toLowerCase())),ee=P.filter(e=>e.title.toLowerCase().includes(A.toLowerCase())||e.content.toLowerCase().includes(A.toLowerCase()));return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx(b.Zb,{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white",children:t.jsx("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx(l.Z,{className:"h-8 w-8"}),t.jsx("h1",{className:"text-3xl font-bold",children:"Etkinlik & Duyuru Merkezi"})]}),t.jsx("p",{className:"text-indigo-100 text-lg",children:"Yakındaki etkinlikleri keşfet, duyuruları takip et"})]}),Y&&(0,t.jsxs)(j.z,{variant:"secondary",onClick:()=>I(!0),className:"bg-white/20 text-white hover:bg-white/30",children:[t.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Etkinlik Oluştur"]})]})})}),t.jsx(b.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsx("div",{className:"flex-1 min-w-64",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx(_.I,{placeholder:"Etkinlik veya duyuru ara...",value:A,onChange:e=>L(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)("select",{value:D,onChange:e=>U(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"T\xfcm Şehirler"}),E.map(e=>t.jsx("option",{value:e,children:e},e))]}),(0,t.jsxs)("select",{value:Q,onChange:e=>T(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"",children:"T\xfcm T\xfcrler"}),S.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]})]})}),(0,t.jsxs)(w.mQ,{value:e,onValueChange:s,children:[(0,t.jsxs)(w.dr,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(w.SP,{value:"events",className:"flex items-center space-x-2",children:[t.jsx(l.Z,{className:"h-4 w-4"}),t.jsx("span",{children:"Etkinlikler"})]}),(0,t.jsxs)(w.SP,{value:"announcements",className:"flex items-center space-x-2",children:[t.jsx(d.Z,{className:"h-4 w-4"}),t.jsx("span",{children:"Duyurular"})]})]}),t.jsx(w.nU,{value:"events",className:"space-y-4",children:M?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(6)].map((e,s)=>t.jsx(b.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),t.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})},s))}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.jsx(i.M,{children:J.map((e,s)=>{let r=H(e.event_type),a=X(e.start_date);return t.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:(0,t.jsxs)(b.Zb,{className:"overflow-hidden hover:shadow-lg transition-all duration-300",children:[e.image_url&&t.jsx("div",{className:"h-48 bg-gray-200 overflow-hidden",children:t.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:e.title}),a&&(0,t.jsxs)(N.C,{variant:"warning",className:"text-xs",children:[t.jsx(u.Z,{className:"h-3 w-3 mr-1"}),"Yakında"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx(N.C,{className:r.color,children:r.label}),t.jsx(N.C,{variant:"outline",children:e.city})]})]}),t.jsx(j.z,{variant:"ghost",size:"sm",onClick:()=>B(e.id),className:e.is_bookmarked?"text-yellow-500":"text-gray-400",children:e.is_bookmarked?t.jsx(x,{className:"h-4 w-4"}):t.jsx(p,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[t.jsx(l.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[(0,Z.p6)(e.start_date),e.start_date!==e.end_date&&` - ${(0,Z.p6)(e.end_date)}`]})]}),e.location&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[t.jsx(g.Z,{className:"h-4 w-4"}),t.jsx("span",{children:e.location})]}),e.online_link&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[t.jsx(h,{className:"h-4 w-4"}),t.jsx("span",{children:"Online Etkinlik"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[t.jsx(y.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[e.current_participants," katılımcı",e.max_participants&&` / ${e.max_participants}`]})]})]}),t.jsx("p",{className:"text-gray-700 text-sm mb-4 line-clamp-3",children:e.description}),e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:e.tags.slice(0,3).map(e=>(0,t.jsxs)(N.C,{variant:"secondary",className:"text-xs",children:["#",e]},e))}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(k.q,{src:e.created_by.avatar_url,alt:e.created_by.username,fallback:e.created_by.username[0]?.toUpperCase(),size:"xs"}),t.jsx("span",{className:"text-xs text-gray-500",children:e.created_by.username})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(j.z,{variant:"ghost",size:"sm",className:"text-gray-500",children:t.jsx(v.Z,{className:"h-4 w-4"})}),t.jsx(j.z,{size:"sm",onClick:()=>$(e.id),disabled:!Y||!!e.max_participants&&e.current_participants>=e.max_participants,variant:e.is_participating?"outline":"default",children:e.is_participating?"Ayrıl":"Katıl"})]})]})]})]})},e.id)})})})}),t.jsx(w.nU,{value:"announcements",className:"space-y-4",children:M?t.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>t.jsx(b.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-3",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),t.jsx("div",{className:"h-16 bg-gray-200 rounded"})]})},s))}):t.jsx("div",{className:"space-y-4",children:t.jsx(i.M,{children:ee.map((e,s)=>t.jsx(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},children:(0,t.jsxs)(b.Zb,{className:`p-6 hover:shadow-md transition-shadow ${e.is_pinned?"border-l-4 border-l-primary-500":""}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),e.is_pinned&&(0,t.jsxs)(N.C,{variant:"default",children:[t.jsx(f.Z,{className:"h-3 w-3 mr-1"}),"Sabitlenmiş"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,t.jsxs)(N.C,{className:W(e.priority),children:["urgent"===e.priority&&"Acil","high"===e.priority&&"Y\xfcksek","medium"===e.priority&&"Orta","low"===e.priority&&"D\xfcş\xfck"]}),(0,t.jsxs)(N.C,{variant:"outline",children:["general"===e.type&&"Genel","school"===e.type&&"Okul","exam"===e.type&&"Sınav","event"===e.type&&"Etkinlik"]})]})]}),(0,t.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[t.jsx("div",{children:(0,Z.SY)(e.created_at)}),(0,t.jsxs)("div",{children:[e.views," g\xf6r\xfcnt\xfcleme"]})]})]}),t.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(k.q,{src:e.created_by.avatar_url,alt:e.created_by.username,fallback:e.created_by.username[0]?.toUpperCase(),size:"xs"}),t.jsx("span",{className:"text-sm text-gray-600",children:e.created_by.username}),"admin"===e.created_by.role&&t.jsx(N.C,{variant:"success",className:"text-xs",children:"Y\xf6netici"})]}),e.expires_at&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Son: ",(0,Z.p6)(e.expires_at)]})]})]})},e.id))})})})]})]})}},6540:(e,s,r)=>{"use strict";r.d(s,{I:()=>n});var t=r(2295),a=r(3729),i=r(1453);let n=a.forwardRef(({className:e,type:s,...r},a)=>t.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));n.displayName="Input"},1467:(e,s,r)=>{"use strict";r.d(s,{SP:()=>o,dr:()=>c,mQ:()=>l,nU:()=>d});var t=r(2295),a=r(3729),i=r(9128),n=r(1453);let l=i.Root,c=a.forwardRef(({className:e,...s},r)=>t.jsx(i.List,{ref:r,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=i.List.displayName;let o=a.forwardRef(({className:e,...s},r)=>t.jsx(i.Trigger,{ref:r,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=i.Trigger.displayName;let d=a.forwardRef(({className:e,...s},r)=>t.jsx(i.Content,{ref:r,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));d.displayName=i.Content.displayName},3313:(e,s,r)=>{"use strict";r.d(s,{a:()=>n});var t=r(3729),a=r(2254),i=r(3890);function n(){let[e,s]=(0,t.useState)({user:null,profile:null,loading:!0,error:null}),r=(0,a.useRouter)();(0,t.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:r}=await i.OQ.auth.getSession();if(r){s(e=>({...e,error:r.message,loading:!1}));return}if(e?.user){let{data:r,error:t}=await i.OQ.from("profiles").select("*").eq("id",e.user.id).single();t&&console.error("Error fetching profile:",t),s({user:e.user,profile:r||null,loading:!1,error:null})}else s(e=>({...e,loading:!1}))}catch(e){console.error("Error getting initial session:",e),s(e=>({...e,error:"Failed to load session",loading:!1}))}})();let{data:{subscription:e}}=i.OQ.auth.onAuthStateChange(async(e,r)=>{if("SIGNED_IN"===e&&r?.user){let{data:e}=await i.OQ.from("profiles").select("*").eq("id",r.user.id).single();s({user:r.user,profile:e||null,loading:!1,error:null})}else"SIGNED_OUT"===e&&s({user:null,profile:null,loading:!1,error:null})});return()=>{e.unsubscribe()}},[]);let n=async(e,r)=>{s(e=>({...e,loading:!0,error:null}));try{let{error:t}=await i.OQ.auth.signInWithPassword({email:e,password:r});if(t)return s(e=>({...e,error:t.message,loading:!1})),{error:t};return{error:null}}catch(r){let e="An unexpected error occurred";return s(s=>({...s,error:e,loading:!1})),{error:{message:e}}}},l=async(e,r,t)=>{s(e=>({...e,loading:!0,error:null}));try{let{data:a,error:n}=await i.OQ.auth.signUp({email:e,password:r,options:{data:t}});if(n)return s(e=>({...e,error:n.message,loading:!1})),{error:n};return{data:a,error:null}}catch(r){let e="An unexpected error occurred";return s(s=>({...s,error:e,loading:!1})),{error:{message:e}}}},c=async()=>{s(e=>({...e,loading:!0}));try{let{error:e}=await i.OQ.auth.signOut();if(e){s(s=>({...s,error:e.message,loading:!1}));return}r.push("/")}catch(e){console.error("Error signing out:",e),s(e=>({...e,error:"Failed to sign out",loading:!1}))}},o=async r=>{if(!e.user)return{error:{message:"Not authenticated"}};try{let{data:t,error:a}=await i.OQ.from("profiles").update(r).eq("id",e.user.id).select().single();if(a)return{error:a};return s(e=>({...e,profile:t})),{data:t,error:null}}catch(e){return{error:{message:"Failed to update profile"}}}};return{...e,signIn:n,signUp:l,signOut:c,updateProfile:o,isAuthenticated:!!e.user}}},4974:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p,metadata:()=>x});var t=r(5036),a=r(2),i=r(1508),n=r(6843);let l=(0,n.createProxy)(String.raw`C:\Users\ummuh\OneDrive\Masaüstü\lisedefteri\src\components\events\event-manager.tsx`),{__esModule:c,$$typeof:o}=l;l.default;let d=(0,n.createProxy)(String.raw`C:\Users\ummuh\OneDrive\Masaüstü\lisedefteri\src\components\events\event-manager.tsx#EventManager`);var u=r(7851),m=r(9681);let x={title:"Etkinlik & Duyuru Merkezi - Gelişmiş Lise Forumu",description:"Yakındaki etkinlikleri keşfet, duyuruları takip et. Lise \xf6ğrencileri i\xe7in \xf6zel etkinlikler ve \xf6nemli duyurular."};function p(){return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(i.h,{}),t.jsx("main",{className:"container mx-auto px-4 py-8",children:t.jsx(a.Suspense,{fallback:t.jsx(m.T,{}),children:t.jsx(d,{})})}),t.jsx(u.$,{})]})}}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[989,134,345,135,783,797,770,147,640],()=>r(3379));module.exports=t})();